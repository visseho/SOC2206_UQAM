---
title: "Labo 2.2 - Introduction à R: objet de R"
author: "Visseho Adjiwanou, PhD."
institute: "Département de Sociologie - UQAM"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  beamer_presentation:
    colortheme: beaver
    fonttheme: structurebold
    theme: Ilmenau
  slidy_presentation: default
  ioslides_presentation: default
header-includes:
  - \usepackage{color}
---


Objets de R
========================================================


## Objets

- R peut stocker des informations en tant qu'objet avec un nom de notre choix. 
- Une fois que nous avons créé un objet, nous le référons simplement par son nom. 
- En d'autres termes, nous utilisons des objets comme "raccourcis" pour certaines informations ou données. 
- Pour cette raison, il est important d'utiliser un **nom intuitif et informatif**. 

## Objets

- Le nom de notre objet doit respecter certaines restrictions:
  - Ne peut pas commencer par un nombre (mais il peut contenir des nombres). 
  - Ne doit pas non plus contenir d'espaces. 
  - Doit éviter les caractères spéciaux tels que **%** et **$**, qui ont des significations spécifiques dans R. 
- Nous utilisons l'opérateur d'affectation **<-** pour attribuer une valeur à un objet.
- Dans RStudio, dans la fenêtre supérieure droite, appelée **Environnement**, nous verrons les objets que nous avons créés. 

## Objets

```{r}

resultat <- (5 - 2) * 3
resultat
print(resultat)

```

- Le calcul ci-dessus est stocké en tant qu'objet nommé **resultat**
- Nous pouvons accéder à la valeur en nous référant au nom de l'objet. 
- Par défaut, R imprimera la valeur de l'objet sur la console si nous entrons simplement le nom de l'objet et que nous cliquons sur Entrée. 
- Alternativement, nous pouvons l'imprimer explicitement en utilisant la fonction **print ()**.


## Objets

```{r}

resultat <- 7 - 2
resultat

```

- Notez que si nous affectons une valeur différente au même nom d'objet, la valeur de l'objet sera modifiée. 
- Par conséquent, nous devons veiller à ne pas écraser les informations précédemment attribuées que nous prévoyons d'utiliser ultérieurement.


## Objets

- Une autre chose à prendre en compte est que les noms d'objet sont sensibles à la casse. 
- Par exemple, Bonjour n'est pas le même que bonjour ou bon jour. 
- En conséquence, nous recevons une erreur dans la console R lorsque nous tapons **Resultat** plutôt que **resultat** que nous avons défini ci-dessus.

> Resultat

> Error: object 'Resultat' not found

- **Les erreurs de programmation** ou **bogues** font partie du processus d'apprentissage. 
- La partie délicate consiste à déterminer comment les réparer. Vous devez faire attention au message d'erreur.
- Ici, le message d'erreur nous dit que l'objet **Resultat** n'existe pas. 


## Objets

- Nous pouvons voir la liste des objets existants dans l'onglet Environnement.
- Il est également possible d'obtenir la même liste en utilisant la fonction **ls ()**.

```{r}
ls()
```


## Objets

- Jusqu'à présent, nous n'avons attribué que des chiffres à un objet. 
- R peut représenter divers autres types de valeurs en tant qu'objets. 
- Par exemple, nous pouvons stocker une chaîne de caractères en utilisant des guillemets.

```{r}
nom <- "Vissého"
nom
nom <- "Visseho Adjiwanou"
nom

```



## Objets

- Dans les chaînes de caractères, l'espacement est autorisé.
- Notez que R traite les nombres comme des caractères quand on lui dit de le faire.
- Cependant, les opérations arithmétiques telles que l'addition et la soustraction ne peuvent pas être utilisées pour les chaînes de caractères. 
- Par exemple, tenter de diviser ou de prendre une racine carrée d'une chaîne de caractères entraînera une erreur.

```{r, echo = TRUE}

resultat <- "5"
resultat

resultat*3
```


## Objets

- R reconnaît différents types d'objets en affectant chaque objet à **une classe**. 
- La séparation d'objets en classes permet à R d'effectuer des opérations appropriées en fonction de la classe des objets. 
- Par exemple, un nombre est stocké en tant qu'objet numérique alors qu'une chaîne de caractères est reconnue en tant qu'objet de caractère. 
- Dans RStudio, la fenêtre Environnement affiche la classe d'un objet ainsi que son nom. 
- La fonction (qui par ailleurs est une autre classe) **class ()** nous indique à quelle classe appartient un objet.

## Objets

```{r}
class(resultat)
class(nom)
class(sqrt)
```

## Objet de R

Autres objets: 

  - Numérique
  - Caractères
  - Fonction
  - Logique

## Mode des objets

![](/Users/visseho/OneDrive - UQAM/Cours/Images_cours/Objet_mode.jpg)

<!--
```{r Objet, echo=FALSE, fig.cap="A caption", out.width = '100%'}

knitr::include_graphics("/Users/visseho/OneDrive - UQAM/Cours/Images_cours/Objet_mode.jpg")

```

-->

Vecteurs
========================================================


## Vecteurs

- Vous savez que vous n'êtes pas dans cette classe pour utiliser R comme une calculatrice :)
- Mais, pour analyser les données.
- Voici une première manière mais **non efficiente** d'entrer les données dans R et de les traiter

## Vecteurs

![](/Users/visseho/OneDrive - UQAM/Cours/Images_cours/Population_mondiale.jpg)

- Le tableau contient des estimations de la population mondiale (en milliers) au cours des dernières décennies. 


<!--
```{r tableau, echo=FALSE, fig.cap="Population mondiale", out.width = '80%'}
knitr::include_graphics("/Users/visseho/OneDrive - UQAM/Cours/Images_cours/Population_mondiale.jpg")
```
-->

## Vecteurs

- Nous pouvons entrer ces données dans R en tant qu'objet numérique. 
- Un vecteur ou un tableau à une dimension représente simplement une collection d'informations stockées dans un ordre spécifique. 
- Nous utilisons la fonction **c ()**, qui signifie **"concaténer"**, pour entrer un vecteur de données contenant plusieurs valeurs avec des virgules séparant les différents éléments du vecteur que nous créons. 
- Par exemple, nous pouvons entrer les estimations de la population mondiale en tant qu’éléments d’un seul vecteur.


```{r Vecteurs 1, out.width = '60%'}

population <- c(2525779, 3026003, 3691173, 4449049, 5320817, 6127700, 6916183)

population
class(population)

population[2]
```


## Vecteurs

- Notons également que la fonction c() peut être utilisée pour combiner plusieurs vecteurs.

```{r Vecteurs 2}

pop1 <- c(2525779, 3026003, 3691173)
pop2 <- c(4449049, 5320817, 6127700, 6916183)

pop_totale <- c(pop1, pop2)

pop_totale

```


## Vecteurs - Information provenant du vecteur

- Pour accéder à des éléments spécifiques d'un vecteur, nous utilisons des crochets **[ ]**.
- Ceci s'appelle **l'indexation**. 
- Plusieurs éléments peuvent être extraits via un vecteur d'indices entre crochets. 
- Également entre crochets, **le tiret, -**, supprime l'élément correspondant d'un vecteur. 
- Notez qu'aucune de ces opérations **ne** modifie le vecteur d'origine.


```{r}
population
population[2]

```

## Vecteurs - Information provenant du vecteur

```{r}

population
population[c(1,3)]

population[1:3]

population[-2]

population[-2, -3]

# Fomctionnne
population[-2:-3] 
population[-2][-3]

population[c(-2, -3)]


population[1, 7]

```


## Vecteurs - Opération sur vecteurs

- Comme chaque élément de ce vecteur est une valeur numérique, nous pouvons lui appliquer des opérations arithmétiques. 
- Les opérations seront **répétées** pour chaque élément du vecteur. 
- Donnons les estimations de population en millions au lieu de milliers en divisant chaque élément du vecteur par 1000.
- Nous pouvons également exprimer chaque estimation de population en proportion de l'estimation de population de 1950. 
  - Rappelons que l'estimation de 1950 est le premier élément du vecteur **population**.


## Vecteurs - Opération sur les vecteurs


```{r, out.width='60%'}

population
pop_million <- population / 1000


pop_million
rate <- population / population[1]
rate 

```

population de 1960 + population de 1970

```{r}

pop_1960_1970 <- population[2] + population[3]
pop_1960_1970  
  
# Population au cours de la période totale

population_total <- population[1] + population[2] + population[3] + population[4] + population[5] + population[6] + population[7]

population_total_mieux <- sum(population[1:7])
population_total_mieux

```

  
- Comment interprétez-vous ce résultat?

## Vecteurs - Opération sur les vecteurs

```{r}
round(rate, 2)
```
- Qu'est-ce que la commande round permet de faire?

Matrice
========================================================

## Matrices

- Mis en commun de plusieurs vecteurs
- Deux dimensions 
  - Nombre de colonnes
  - Nombre de lignes


## Matrices

```{r}

population
annee <- c(1950, 1960, 1970, 1980, 1990, 2000, 2010)
# pib en million de $
pib <- c(5336101, 9424203, 16059180, 19367892, 24639012, 333725635, 74004249)

Mat_an_pop <- cbind(annee, population, pib)
Mat_an_pop
```

## Calcul sur une matrices

```{r}
# Element d'une matrice
Mat_an_pop[3, 2]

# Element d'une ligne
Mat_an_pop[2, ]

# Élément d'une colonne
Mat_an_pop[, 3]
Mat_an_pop[, "population"]

```

## Créer un objet à partir d'une matrice: objet hors de la matrice

```{r}
# Objet hors de la matrice

pop_totale_1 <- Mat_an_pop[1, "population"] + Mat_an_pop[2, "population"] + Mat_an_pop[3, "population"] + Mat_an_pop[4, "population"] + Mat_an_pop[5, "population"] + Mat_an_pop[6, "population"] + Mat_an_pop[7, "population"]
pop_totale_1

```

## Créer un objet à partir d'une matrice: objet hors de la matrice

```{r}
# De manière plus élégante
pop_totale <- sum(Mat_an_pop[ , "population"])
pop_totale
```


## Créer un objet à partir d'une matrice: objet dans la matrice

```{r}
# pib par tête

pib_tete <- Mat_an_pop[, "pib"]/Mat_an_pop[, "population"]*1000
pib_tete

```

Alors, on a crée un autre vecteur qui donne le pib/tête chaque décennie.
Il va falloir maintenant inclure cela dans la base de données existantes. 

```{r}

Mat_an_pop <- cbind(Mat_an_pop, pib_tete)
Mat_an_pop

```




## Question
Dans quel cas faut-il créer l'objet à l'intérieur et dans quel cas, il faut la créer à l'extérieur?


## Exercices

2.  EXERCICE 1 

En utilisant les informations du tableau sur la population mondiale, calculer le pourcentage d'augmentation de la population pour chaque décennie, défini comme l'augmentation au cours de la décennie divisée par la population de départ. Par exemple, supposons que la population atteignait 100 000 habitants en un an et atteignait 120 000 l'année suivante. Dans ce cas, nous disons «la population a augmenté de 20% = 120000/100000*100».


<!--
## Réponse 1



```{r}
# A partir d'un vecteur

population
croissane <- population[-1] / population[-7]
croissane 

```

## Réponse 2


```{r}
# A partir d'une matrice
Mat_an_pop
croissance1 <- Mat_an_pop[2:7, "population"] / Mat_an_pop[1:6, "population"]
croissance1
```

-->
