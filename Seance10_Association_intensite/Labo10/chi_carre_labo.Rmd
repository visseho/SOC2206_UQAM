---
title: "chi_carre_labo"
author: Generated by BlueSky Statistics, LLC
date: "`r format(Sys.time(), '%d %B, %Y, %H:%M:%S')`" 
output:
  html_document: default
R Version: 4.1.0
BlueSkyStatistics Version: 10.0b2
---


```{r setup-libraries, echo= FALSE, eval= TRUE, include = FALSE}
library(dplyr)
library(rmarkdown) 
library(kableExtra)
library(BlueSky)
library(gdata)
library(stringr)
library(openxlsx)
library(haven)
library(readr)
library(readxl)
library(data.table)
library(foreign)



# The folowing is needed if R Studio needs to Knit to PDF
#library(tinytex)
```

```{r setup-knitr-options, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE)

# Will keep the one single global graphics device open for all the code chunks 
#knitr::opts_knit$set(global.device = TRUE)

# Will output all the graphics - otherwise only the last graphics will be shown
knitr::opts_knit$set(fig.keep = 'all')

# To see the fully rendered output not the markup
knitr::opts_chunk$set(results='asis')

# Comment the above and un-comment the below to see the non rendered markup output
#knitr::opts_chunk$set(results="markup")
```

# Commentaire
aygfjhklsrjgjk

```{r BSky-config, eval= TRUE, include = FALSE}
        
#To flush internally all previously run BSkyFormat() output 
BSkyGetHoldFormatObjList()

# Sets up the default HTML output styling parameters 
BSkySetHtmlStylingSetting()

# Output Data cell - decimal points/engineering notation settings
#BSkySetDecimalDigitSetting(2)
#BSkySetEngNotationSetting(TRUE)
#BSkySetRound(TRUE)
#BSkySetPvalueDisplaySetting(FALSE)

# End of config set up 
```
# Open Dataset: dhs_ipv

```{r}
BSkyloadDataset('/Users/visseho/OneDrive - UQAM/Cours/SOC2206/S/Seance9_Comparaison_moyenne/Labo9/dhs_ipv.csv', 'CSV', worksheetName=NULL, replace_ds=TRUE, load.missing=FALSE, csvHeader=TRUE, character.to.factor=TRUE, isBasketData=FALSE, trimSPSStrailing=FALSE, sepChar=',', deciChar='.', datasetName='dhs_ipv')
BSkyLoadRefresh("dhs_ipv")
```
# Numerical Statistics, using summarize

```{r}

require(dplyr)
BSkyResults=NULL
BSkyVars = c('beat_burnfood')
for (var in BSkyVars)
{
df <-dhs_ipv %>%
	dplyr::group_by(region)  %>%
	dplyr::summarize( count =dplyr::n(),
		min = base::min(eval(parse(text=var)), na.rm = TRUE),
		Quantile_1st_25 =stats::quantile(eval(parse(text=var)),
		 probs = seq(0.25),na.rm=TRUE),
		mean=base::mean(eval(parse(text=var)),na.rm =TRUE),
		median=stats::median(eval(parse(text=var)),na.rm =TRUE),
		Quantile_3rd_75 =stats::quantile(eval(parse(text=var)),
		probs = seq(0.75), na.rm = TRUE),
		variance=stats::var(eval(parse(text=var)),na.rm =TRUE),
		std_err=BlueSky::bskystderr(eval(parse(text=var))),
		skewness=moments::skewness(eval(parse(text=var)),na.rm =TRUE),
		kurtosis=moments::kurtosis(eval(parse(text=var)),na.rm =TRUE))
#Adding the target variable to the results
df = cbind(TargetVariable=rep(var, nrow(df)),df)
#Transposing the dataframe 
df = t(df)
#Combining the results for each target variable
BSkyResults = cbind (BSkyResults, df)
}
BSkyFormat(BSkyResults, singleTableOutputHeader = "Summaries")

```
# t-test, Independent Samples

```{r}

# Run the T-test
require(effectsize)
BSky_Independent_Sample_T_Test = BSkyIndSmTTest(varNamesOrVarGlobalIndices=c('beat_burnfood'), 
    group = c('region'), conf.level=0.95, 
    alternative = 'two.sided', 
    datasetNameOrDatasetGlobalIndex = 'dhs_ipv',
    missing = 0)
# Display the results
BSkyFormat(BSky_Independent_Sample_T_Test)
# Remove remporary objects
if ( exists('BSky_Independent_Sample_T_Test')) rm(BSky_Independent_Sample_T_Test)

```
# Subset Dataset

```{r}

require (dplyr)
#Creates the subsetted dataset
essai <- dhs_ipv %>%
	dplyr::filter(region == "Sub-Saharan Africa" | region == "Asia") %>%
	dplyr::select(beat_burnfood,X___1,region)  
#Refreshes the subsetted dataset in the data grid
BSkyLoadRefresh('essai')

```
# t-test, Independent Samples

```{r}

# Run the T-test
require(effectsize)
BSky_Independent_Sample_T_Test = BSkyIndSmTTest(varNamesOrVarGlobalIndices=c('beat_burnfood'), 
    group = c('region'), conf.level=0.95, 
    alternative = 'two.sided', 
    datasetNameOrDatasetGlobalIndex = 'essai',
    missing = 0)
# Display the results
BSkyFormat(BSky_Independent_Sample_T_Test)
# Remove remporary objects
if ( exists('BSky_Independent_Sample_T_Test')) rm(BSky_Independent_Sample_T_Test)

```
# Frequency Table

```{r}

#Run the the frequency command            
BSkyFreqResults <- BSkyFrequency( vars = c('region') , data = essai)
#Display the results
BSkyFormat(BSkyFreqResults)
#Remove the temporary object
if (exists('BSkyFreqResults')) rm (BSkyFreqResults)

```
# Rank Variable(s)

```{r}

require(dplyr)
essai <- essai %>%
	mutate(beat_burnfood_se=percent_rank(beat_burnfood))
BSkyLoadRefresh("essai")

```
# Rank Variable(s)

```{r}

require(dplyr)
essai <- essai %>%
	mutate(se_beat_burnfood=row_number(beat_burnfood))
BSkyLoadRefresh("essai")

```
# Custom R Code

```{r}

require(dplyr)
essai <- essai %>%
	mutate(rk_beat_burnfood=cume_dist(beat_burnfood))
BSkyLoadRefresh("essai")

```
# Open Dataset: Emploi_femme

```{r}
BSkyloadDataset('/Users/visseho/OneDrive - UQAM/Cours/SOC2206/S/Seance9_Association_intensite/Labo8/Emploi_femme.csv', 'CSV', worksheetName=NULL, replace_ds=TRUE, load.missing=FALSE, csvHeader=TRUE, character.to.factor=TRUE, isBasketData=FALSE, trimSPSStrailing=FALSE, sepChar=',', deciChar='.', datasetName='Emploi_femme')
BSkyLoadRefresh("Emploi_femme")
```
# Frequency Table

```{r}

#Run the the frequency command            
BSkyFreqResults <- BSkyFrequency( vars = c('sexe','emploi') , data = Emploi_femme)
#Display the results
BSkyFormat(BSkyFreqResults)
#Remove the temporary object
if (exists('BSkyFreqResults')) rm (BSkyFreqResults)

```
# Frequency Table

```{r}

#Run the the frequency command            
BSkyFreqResults <- BSkyFrequency( vars = c('age') , data = Emploi_femme)
#Display the results
BSkyFormat(BSkyFreqResults)
#Remove the temporary object
if (exists('BSkyFreqResults')) rm (BSkyFreqResults)

```
# Numerical Statistics, using summarize

```{r}

require(dplyr)
BSkyResults=NULL
BSkyVars = c('age')
for (var in BSkyVars)
{
df <-Emploi_femme %>%
	dplyr::group_by()  %>%
	dplyr::summarize( count =dplyr::n(),
		min = base::min(eval(parse(text=var)), na.rm = TRUE),
		Quantile_1st_25 =stats::quantile(eval(parse(text=var)),
		 probs = seq(0.25),na.rm=TRUE),
		mean=base::mean(eval(parse(text=var)),na.rm =TRUE),
		median=stats::median(eval(parse(text=var)),na.rm =TRUE),
		Quantile_3rd_75 =stats::quantile(eval(parse(text=var)),
		probs = seq(0.75), na.rm = TRUE),
		variance=stats::var(eval(parse(text=var)),na.rm =TRUE),
		std_err=BlueSky::bskystderr(eval(parse(text=var))),
		skewness=moments::skewness(eval(parse(text=var)),na.rm =TRUE),
		kurtosis=moments::kurtosis(eval(parse(text=var)),na.rm =TRUE))
#Adding the target variable to the results
df = cbind(TargetVariable=rep(var, nrow(df)),df)
#Transposing the dataframe 
df = t(df)
#Combining the results for each target variable
BSkyResults = cbind (BSkyResults, df)
}
BSkyFormat(BSkyResults, singleTableOutputHeader = "Summaries")

```
# Bar Chart

```{r}

## [Bar Chart With Counts]
require(ggplot2);
require(ggthemes);
require(stringr);
ggplot(data=Emploi_femme, aes(x=sexe)) +
	geom_bar(position="stack",alpha=1) +
	labs(x="sexe",y='Count',title= "Bar chart for X axis: sexe Y='Count' ") +
	xlab("sexe") +
	ylab("Count") + 
	theme_grey() + 
	theme(text=element_text(family="sans",
	face="plain",
	color="#000000",size=12,
	hjust=0.5,vjust=0.5))
```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('sexe'), y=c('emploi'), 
    datasetname='Emploi_femme', 
    chisq=FALSE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=FALSE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('emploi'), y=c('sexe'), 
    datasetname='Emploi_femme', 
    chisq=FALSE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=TRUE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('emploi'), y=c('sexe'), 
    datasetname='Emploi_femme', 
    chisq=TRUE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=TRUE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('emploi'), y=c('sexe'), 
    datasetname='Emploi_femme', 
    chisq=TRUE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=TRUE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('emploi'), y=c('sexe'), 
    datasetname='Emploi_femme', 
    chisq=FALSE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=FALSE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
# Remove NAs

```{r}

require(data.table)
#Removes missing values
#essai<-data.table:::na.omit.data.table(Emploi_femme[c('emploi')])
essai<-na.omit(Emploi_femme[c('emploi')])
#Refreshes the dataset in the data grid
BSkyLoadRefresh("essai")
 
```
# Recode Variables

```{r}

require(car)
#Perform the recode
BSkyRecode(colNames=c('emploi'), newColNames=c('emploi_1'), OldNewVals='"-" == NA', NewCol=TRUE, dontMakeFactor =FALSE,dataSetNameOrIndex='Emploi_femme')
#Refresh the dataset in the data grid
BSkyLoadRefresh("Emploi_femme")

```
# Recode Variables

```{r}

require(car)
#Perform the recode
BSkyRecode(colNames=c('emploi'), newColNames=c('emploi_1'), OldNewVals='"-" = NA', NewCol=TRUE, dontMakeFactor =FALSE,dataSetNameOrIndex='Emploi_femme')
#Refresh the dataset in the data grid
BSkyLoadRefresh("Emploi_femme")

```
# Crosstab

```{r}
#Create the crosstab
BSky_Multiway_Cross_Tab = BSkyCrossTable(
    x=c('emploi_1'), y=c('sexe'), 
    datasetname='Emploi_femme', 
    chisq=TRUE, mcnemar=FALSE, fisher=FALSE,
    prop.r=FALSE, prop.c=TRUE,
    resid=FALSE, sresid=FALSE, asresid=FALSE,
    expected=FALSE)
#Display the crosstab in the output grid
BSkyFormat(BSky_Multiway_Cross_Tab)
```
